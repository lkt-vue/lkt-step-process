(function(e,i){typeof exports=="object"&&typeof module<"u"?module.exports=i(require("vue")):typeof define=="function"&&define.amd?define(["vue"],i):(e=typeof globalThis<"u"?globalThis:e||self,e.LktStepProcess=i(e.Vue))})(this,function(e){"use strict";const i={key:0,class:"lkt-step-process_header"},h={class:"lkt-step-process_header-title"},y={class:"lkt-step-process_header-slot"},_={class:"lkt-step-process-buttons"},V={key:1},g={key:1},S={key:1,class:"lkt-step-process_content"},b={class:"lkt-grid-1"},B={name:"LktStepProcess",inheritAttrs:!1},C=e.defineComponent({...B,props:{modelValue:{type:Object,required:!1,default:()=>({step:1,steps:[],data:{}})},title:{type:String,default:""},nextText:{type:String,default:"Next"},prevText:{type:String,default:"Back"},nextValidator:{type:Function,required:!1,default:()=>!0},prevValidator:{type:Function,required:!1,default:()=>!0}},emits:["next","prev","finish"],setup(u,{expose:m,emit:N}){const a=u,c=e.useSlots(),p=N,o=e.ref(!1),t=e.ref(a.modelValue),v=e.ref(null),k=e.ref(null),E=e.computed(()=>o.value?!1:a.title||!!c["post-title"]),H=e.computed(()=>{let r=[];for(let f in c)f.indexOf("step-")!==-1&&r.push(f.substring(5));return r}),d=e.computed(()=>t.value.step?t.value.step:!t.value.steps||!t.value.steps[0]?null:t.value.steps[0].name),l=e.computed(()=>t.value.steps.findIndex(r=>r.name===d.value)),n=e.computed(()=>t.value.steps[l.value]),D=e.computed(()=>typeof n.value.prevValidator=="function"?n.value.prevValidator(t.value):typeof n.value.prevValidator=="boolean"?n.value.prevValidator:typeof a.prevValidator=="function"?a.prevValidator(t.value):!0),w=e.computed(()=>typeof n.value.nextValidator=="function"?n.value.nextValidator(t.value):typeof n.value.nextValidator=="boolean"?n.value.nextValidator:typeof a.nextValidator=="function"?a.nextValidator(t.value):!0),L=e.computed(()=>l.value===0||!D.value),P=e.computed(()=>l.value===t.value.steps.length-1||!w.value),R=e.computed(()=>typeof n.value.prevHidden=="function"?n.value.prevHidden(t.value):typeof n.value.prevHidden=="boolean"?n.value.prevHidden:l.value===0),$=e.computed(()=>typeof n.value.nextHidden=="function"?n.value.nextHidden(t.value):typeof n.value.nextHidden=="boolean"?n.value.nextHidden:l.value===t.value.steps.length-1),j=e.computed(()=>typeof n.value.prevConfirm=="string"?n.value.prevConfirm:""),q=e.computed(()=>typeof n.value.nextConfirm=="string"?n.value.nextConfirm:""),T=e.computed(()=>typeof n.value.nextResource=="string"?n.value.nextResource:""),F=e.computed(()=>typeof n.value.nextResourceData=="object"?n.value.nextResourceData:{}),I=e.computed(()=>{const r=["lkt-step-process"];return d.value&&r.push(`step-${d.value}`),r.join(" ")}),O=r=>{t.value.step=t.value.steps[l.value+1].name,l.value===t.value.steps.length-1?p("finish",r):p("next",r)},z=r=>{t.value.step=t.value.steps[l.value-1].name,p("prev",r)};return m({goNext:()=>{k.value.click()},goPrev:()=>{v.value.click()},startLoader:()=>o.value=!0,stopLoader:()=>o.value=!1}),(r,f)=>{const x=e.resolveComponent("lkt-button"),A=e.resolveComponent("lkt-loader");return e.openBlock(),e.createElementBlock("article",{class:e.normalizeClass(I.value)},[E.value?(e.openBlock(),e.createElementBlock("header",i,[e.createElementVNode("h1",h,e.toDisplayString(u.title),1),e.createElementVNode("div",y,[e.renderSlot(r.$slots,"post-title",{config:t.value,loading:o.value})])])):e.createCommentVNode("",!0),e.createElementVNode("div",_,[e.withDirectives(e.createVNode(x,{ref:s=>v.value=s,palette:"danger",disabled:L.value,"confirm-modal":j.value,onClick:z},{default:e.withCtx(()=>[e.unref(c)["button-prev"]?e.renderSlot(r.$slots,"button-prev",{key:0,config:t.value}):(e.openBlock(),e.createElementBlock("span",V,"Back"))]),_:3},8,["disabled","confirm-modal"]),[[e.vShow,!o.value&&!R.value]]),e.withDirectives(e.createVNode(x,{ref:s=>k.value=s,palette:"success",disabled:P.value,"confirm-modal":q.value,resource:T.value,"resource-data":F.value,onClick:O},{default:e.withCtx(()=>[e.unref(c)["button-next"]?e.renderSlot(r.$slots,"button-next",{key:0,config:t.value}):(e.openBlock(),e.createElementBlock("span",g,"Next"))]),_:3},8,["disabled","confirm-modal","resource","resource-data"]),[[e.vShow,!o.value&&!$.value]])]),o.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",S,[e.createElementVNode("div",b,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(H.value,s=>e.withDirectives((e.openBlock(),e.createElementBlock("div",null,[e.renderSlot(r.$slots,"step-"+s,{config:t.value})],512)),[[e.vShow,s===d.value]])),256))])])),o.value?(e.openBlock(),e.createBlock(A,{key:2})):e.createCommentVNode("",!0)],2)}}}),G="";return{install:(u,m={})=>{u.component("lkt-step-process",C)}}});
